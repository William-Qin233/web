## 生命周期图
## 旧生命周期图（16版本之前）
![](https://cdn.nlark.com/yuque/0/2022/png/12949875/1653300815668-3343e9ac-c78e-4ab4-bc70-2c18297ea2ca.png#clientId=ub6bd15b6-9857-4&crop=0&crop=0&crop=1&crop=1&from=paste&id=ubfd23e29&margin=%5Bobject%20Object%5D&originHeight=732&originWidth=696&originalType=url&ratio=1&rotation=0&showTitle=false&status=done&style=none&taskId=u458bd032-dad9-43ba-977c-0db91732a38&title=)
## 新生命周期图
黄框内是被移除的生命周期函数
![image.png](https://cdn.nlark.com/yuque/0/2022/png/12949875/1653308946889-8f2730c1-2b2b-4636-b532-feb6400d09aa.png#clientId=ub6bd15b6-9857-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=838&id=u555081d0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=838&originWidth=948&originalType=binary&ratio=1&rotation=0&showTitle=false&size=237919&status=done&style=none&taskId=u2241b9ea-30c2-4537-82ec-179278c3ae4&title=&width=948)

1. 新的生命周期废除了	`componentWillMount``componentWillReceivedProps``componentWillUpdate` 3个生命周期；
1. 新增了`getDerivedFromProps``getSnapshotBeforeUpdate``componentDidCatch`（错误的处理）
# 为什么要废除 3 个生命周期

- `componentWillMount`废弃

在 ssr 中这个方法会被多次调佣，会重复触发多遍。如果在这里绑定了监听事件，会无法解绑，导致内存泄漏，变得不够安全高效。

- `componentWillReceivedProps`

当父组件更新时，也会传入props，导致不必要的更新（除非手动一个个区分，工作量太大），被

- `componentWillUpdate`废弃

更新前记录 DOM 状态，可能会做一些处理，与 componentDidUpdate 间隔时间如果太长，可能会导致状态的不可信
## setState 是同步还是异步

# 参考文档
[React 生命周期（16版本）](https://segmentfault.com/a/1190000016617400?utm_source=sf-similar-article)

















